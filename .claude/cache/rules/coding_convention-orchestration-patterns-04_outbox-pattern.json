{
  "id": "coding_convention-orchestration-patterns-04_outbox-pattern",
  "sourceFile": "/Users/sangwon-ryu/fileflow/docs/coding_convention/coding_convention/09-orchestration-patterns/04_outbox-pattern.md",
  "metadata": {
    "keywords": {
      "primary": [
        "outbox",
        "pattern"
      ],
      "secondary": [
        "transactional",
        "outbox",
        "pattern",
        "외부",
        "api",
        "호출의",
        "안전한",
        "조율"
      ],
      "anti": []
    },
    "layer": "general",
    "priority": "critical",
    "tokenEstimate": 3491
  },
  "rules": {
    "prohibited": [
      "❌ 앱 크래시/재시작 시 **메모리 이벤트 유실**",
      "❌ 재시도 로직 직접 구현 필요",
      "❌ DLQ (Dead Letter Queue) 부재",
      "❌ 동시 처리량 제어 어려움",
      "❌ 결제, 주문, 재고 등 **critical 호출에는 부적합**"
    ],
    "allowed": [
      "✅ Push 알림, 로그 전송 등 **유실 허용 가능한 호출**",
      "✅ 프로토타입, PoC 단계",
      "✅ **즉시성**: 이벤트가 Relay를 깨워서 즉시 처리 (패턴 A 수준)",
      "✅ **안전성**: Outbox가 DB에 저장되어 크래시 복구 가능",
      "✅ **폴백 보장**: 주기적 폴링으로 이벤트 유실 대비",
      "✅ **멱등성**: `idemKey`로 중복 요청 방지",
      "✅ **재시도**: Outbox Status로 재시도 관리",
      "✅ **추가 인프라 불필요**: MQ 없이 MySQL만으로 구현",
      "✅ **결제, 주문, 재고 등 critical 도메인**",
      "✅ MQ 도입 전 초기 단계",
      "✅ 중간 규모 처리량 (<10,000 msg/min)",
      "✅ **MQ 이점 총집합**: 백프레셔, 재시도, DLQ, 순서/중복 제어",
      "✅ **이벤트 유실 없음**: MQ 내구성 보장",
      "✅ **확장성**: 워커 수평 확장 (Consumer Group)",
      "✅ **모니터링**: CloudWatch Metrics, Kafka Dashboard",
      "✅ **MQ 인프라가 이미 있는 경우**",
      "✅ 대규모 처리량 (>10,000 msg/min)",
      "✅ 여러 Consumer가 필요한 경우 (Fan-out)",
      "✅ 지리적 분산 처리 필요"
    ]
  },
  "documentation": {
    "path": "docs/coding_convention/coding_convention/09-orchestration-patterns/04_outbox-pattern.md",
    "summary": "Auto-generated from 04_outbox-pattern.md"
  }
}