# ===============================================
# Persistence MySQL Adapter Configuration
# ===============================================
# 공통 설정 (환경별 설정은 application-{profile}.yml 참조)
# Bootstrap 모듈에서 이 설정을 오버라이드함
#
# @author FileFlow Team
# @since 1.0.0
# ===============================================

spring:
  # ===============================================
  # JPA Configuration (공통)
  # ===============================================
  jpa:
    database-platform: org.hibernate.dialect.MySQLDialect
    hibernate:
      ddl-auto: validate
      naming:
        physical-strategy: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
        implicit-strategy: org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy
    
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true
        jdbc:
          batch_size: 50
          fetch_size: 100
        order_inserts: true
        order_updates: true
        batch_versioned_data: true
        query:
          plan_cache_max_size: 2048
          plan_parameter_metadata_max_size: 128
        generate_statistics: false
        connection:
          provider_disables_autocommit: false
    
    open-in-view: false
    show-sql: false

  # ===============================================
  # Flyway Configuration (공통)
  # ===============================================
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    baseline-version: 0
    encoding: UTF-8
    sql-migration-prefix: V
    sql-migration-separator: __
    sql-migration-suffixes: .sql
    placeholder-replacement: true
    placeholders:
      charset: utf8mb4
      collation: utf8mb4_unicode_ci
    validate-on-migrate: true
    out-of-order: false
    group: false
    mixed: false
    repeatable-sql-migration-prefix: R
    table: flyway_schema_history
