# ===============================================
# REST API Adapter Configuration - Local Profile
# ===============================================
# 활성화: bootstrap의 application-local.yml에서 import
# ===============================================

# API Settings for Local Development
api:
  error:
    include-stacktrace: true

# ===============================================
# Security Configuration (CORS)
# ===============================================
security:
  cors:
    # 허용할 Origin (로컬 개발용)
    allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173,http://127.0.0.1:3000}

    # 허용할 HTTP 메서드
    allowed-methods:
      - GET
      - POST
      - PUT
      - PATCH
      - DELETE
      - OPTIONS

    # 허용할 헤더 (환경변수로 오버라이드 가능)
    allowed-headers: ${CORS_ALLOWED_HEADERS:*}

    # 노출할 응답 헤더
    exposed-headers:
      - X-Total-Count
      - X-Trace-Id

    # 자격 증명 허용 (쿠키, Authorization 헤더)
    allow-credentials: true

  # 공개 엔드포인트 (인증 없이 접근 가능)
  public-endpoints:
    - pattern: /docs
    - pattern: /docs/**
    - pattern: /v3/api-docs/**
    - pattern: /swagger-ui/**
    - pattern: /swagger-ui.html

# ===============================================
# API Documentation (Springdoc OpenAPI)
# ===============================================
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    operations-sorter: method
    tags-sorter: alpha
    display-request-duration: true
    try-it-out-enabled: true
  packages-to-scan:
    - com.ryuqq.fileflow.adapter.in.rest
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
  cache:
    disabled: true
