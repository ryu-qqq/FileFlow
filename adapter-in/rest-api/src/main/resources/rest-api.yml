# ===============================================
# REST API Adapter Configuration
# ===============================================
#
# API 엔드포인트는 ApiPaths.java에서 상수로 관리됩니다.
# @see com.ryuqq.fileflow.adapter.in.rest.auth.paths.ApiPaths
#
# 보안 경로 분류는 SecurityPaths.java에서 관리됩니다.
# @see com.ryuqq.fileflow.adapter.in.rest.auth.paths.SecurityPaths
# ===============================================

# ===============================================
# Springdoc (Swagger/OpenAPI) 설정
# Gateway 라우팅 패턴(/api/v1/file/**)에 맞춰 경로 설정
# 인증 필요 (Service Token 또는 JWT) - 항상 활성화
# ===============================================
springdoc:
  api-docs:
    enabled: true
    path: /api/v1/file/api-docs
  swagger-ui:
    enabled: true
    path: /api/v1/file/swagger-ui.html
    urls-primary-name: "FileFlow API"
    # 태그/오퍼레이션 정렬
    tags-sorter: alpha
    operations-sorter: alpha
    # 기본 펼침 상태
    doc-expansion: list
    # 요청 시간 표시
    display-request-duration: true
    # 모델 펼침 깊이
    default-models-expand-depth: 2
    default-model-expand-depth: 2
    # 검색 필터 활성화
    filter: true
  # 기본 Content-Type
  default-consumes-media-type: application/json
  default-produces-media-type: application/json

# Error 설정
api:
  error:
    base-url: about:blank
    use-about-blank: true

# Gateway Security Settings
security:
  gateway:
    user-id-header: X-User-Id
    user-roles-header: X-User-Roles
    tenant-id-header: X-Tenant-Id
    organization-id-header: X-Organization-Id

  # Service Token 인증 설정 (서버 간 내부 통신용)
  # SSM Parameter Store에서 환경변수로 주입됨
  service-token:
    enabled: ${SECURITY_SERVICE_TOKEN_ENABLED:false}
    secret: ${SECURITY_SERVICE_TOKEN_SECRET:}
