# ===============================================
# REST API Adapter Configuration - Stage Profile
# ===============================================
# 활성화: bootstrap의 application-stage.yml에서 import
# ===============================================

# API Settings for Staging
api:
  error:
    include-stacktrace: false

# Security Settings for Staging
security:
  cors:
    allowed-origins:
      - ${CORS_ALLOWED_ORIGINS:https://stage-fileflow.ryuqq.com}
    allowed-methods:
      - GET
      - POST
      - PUT
      - DELETE
    allowed-headers:
      - Authorization
      - Content-Type
      - X-Request-ID
      - X-Correlation-ID
    allow-credentials: true

  # Gateway Authentication
  gateway:
    enabled: true

  # Cookie Security Settings
  cookie:
    secure: true
    http-only: true
    same-site: strict

  # Service Token 인증 (서버 간 내부 통신)
  # SSM: /fileflow/stage/security/service-token-secret
  service-token:
    enabled: true
    secret: ${SECURITY_SERVICE_TOKEN_SECRET:}

  # 공개 엔드포인트 (인증 없이 접근 가능)
  public-endpoints:
    - pattern: /docs
    - pattern: /docs/**
    - pattern: /v3/api-docs/**
    - pattern: /swagger-ui/**
    - pattern: /swagger-ui.html

# ===============================================
# API Documentation (Springdoc OpenAPI) - Stage
# ===============================================
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    operations-sorter: method
    tags-sorter: alpha
    display-request-duration: true
    try-it-out-enabled: true
  packages-to-scan:
    - com.ryuqq.fileflow.adapter.in.rest
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
  cache:
    disabled: true
