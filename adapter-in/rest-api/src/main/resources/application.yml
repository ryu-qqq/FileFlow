# ===============================================
# REST API Adapter Configuration
# ===============================================
# REST API 어댑터 전용 설정
# 애플리케이션 런타임 설정은 bootstrap/bootstrap-web-api/application.yml 참조
#
# @author windsurf
# @since 1.0.0
# ===============================================

# ===============================================
# API Endpoint Configuration
# ===============================================
# REST API 엔드포인트 경로 중앙 관리 (바운디드 컨텍스트별 분리)
# @see com.ryuqq.fileflow.adapter.rest.config.properties.ApiEndpointProperties
# @see com.ryuqq.fileflow.adapter.rest.config.properties.IamEndpointProperties
# @see com.ryuqq.fileflow.adapter.rest.config.properties.SettingsEndpointProperties
api:
  endpoints:
    # API v1 베이스 경로
    base-v1: /api/v1

    # ===============================================
    # IAM Bounded Context
    # ===============================================
    iam:
      # Organization 도메인
      organization:
        base: /organizations
        by-id: /{organizationId}
        status: /{organizationId}/status

      # Tenant 도메인
      tenant:
        base: /tenants
        by-id: /{tenantId}
        status: /{tenantId}/status
        tree: /{tenantId}/tree

      # Permission 도메인
      permission:
        base: /permissions
        evaluate: /evaluate

      # UserContext 도메인
      user-context:
        base: /user-contexts

    # ===============================================
    # Settings Bounded Context
    # ===============================================
    settings:
      base: /settings

    # ===============================================
    # Upload Bounded Context
    # ===============================================
    upload:
      base: /uploads
      multipart:
        init: /multipart/init
        part-url: /multipart/{sessionKey}/parts/{partNumber}/url
        mark-part: /multipart/{sessionKey}/parts/{partNumber}
        complete: /multipart/{sessionKey}/complete

    # ===============================================
    # Download Bounded Context
    # ===============================================
    download:
      base: /downloads
      external:
        start: /external
        status: /external/{downloadId}/status

    # ===============================================
    # File Management Bounded Context
    # ===============================================
    file:
      base: /files
      by-id: /{fileId}
      download-url: /{fileId}/download-url

  # ===============================================
  # Error Response Configuration (RFC 7807)
  # ===============================================
  # @see com.ryuqq.fileflow.adapter.rest.config.properties.ApiErrorProperties
  error:
    # 에러 타입 문서 베이스 URL
    # 프로덕션: https://api.example.com/problems
    # 개발: about:blank (기본값)
    base-url: about:blank

    # about:blank 사용 여부 (true: 문서 URL 무시, false: base-url 사용)
    use-about-blank: true
