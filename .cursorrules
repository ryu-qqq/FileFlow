# Spring DDD Standards - Cursor AI Rules

> **ì»¨ë²¤ì…˜ ì›ë³¸**: `docs/coding_convention/` (98ê°œ ê·œì¹™)
> **Cache**: `.claude/cache/rules/` (JSON ê²€ìƒ‰ìš©)

---

## ğŸš¨ Zero-Tolerance (ì ˆëŒ€ ê¸ˆì§€)

### 1. Lombok ê¸ˆì§€
- âŒ `@Data`, `@Builder`, `@Getter`, `@Setter`, `@AllArgsConstructor`, `@NoArgsConstructor`
- âœ… **Pure Java getter/setter ì§ì ‘ ì‘ì„±**

### 2. Law of Demeter (Getter ì²´ì´ë‹ ê¸ˆì§€)
- âŒ `order.getCustomer().getAddress().getZipCode()`
- âœ… `order.getCustomerZipCode()` **(Tell, Don't Ask)**

### 3. Long FK Strategy (JPA ê´€ê³„ ê¸ˆì§€)
- âŒ `@ManyToOne`, `@OneToMany`, `@OneToOne`, `@ManyToMany`
- âœ… **`private Long userId;` (Long FK ì‚¬ìš©)**

### 4. Transaction ê²½ê³„ & Outbox Pattern
- âŒ `@Transactional` ë‚´ ì™¸ë¶€ API í˜¸ì¶œ
- âœ… **íŠ¸ëœì­ì…˜ì€ ì§§ê²Œ ìœ ì§€, ì™¸ë¶€ í˜¸ì¶œì€ ë°–ì—ì„œ**
- âœ… **ì™¸ë¶€ API í˜¸ì¶œ ì‹œ Transactional Outbox Pattern ì‚¬ìš© (Pattern B ê¶Œì¥)**
  - Pattern A (Direct Event): ì§€ì–‘ - ê²°ì œ/ê¸ˆìœµì—” ë¶€ì í•©
  - **Pattern B (Outbox + Event Wake-up)**: ê¶Œì¥ - í”„ë¡œë•ì…˜ í‘œì¤€
  - Pattern C (MQ Integration): MQ ë„ì… ì‹œ ê¶Œì¥

### 5. Orchestration Pattern
- âŒ `executeInternal()`ì— `@Transactional` ì‚¬ìš©
- âœ… `executeInternal()`ì— `@Async` í•„ìˆ˜, íŠ¸ëœì­ì…˜ ë°–ì—ì„œ ì™¸ë¶€ API í˜¸ì¶œ
- âŒ Commandì— Lombok (`@Data`, `@Builder` ë“±)
- âœ… CommandëŠ” Record íŒ¨í„´ ì‚¬ìš© (`public record XxxCommand`)
- âŒ Operation Entityì— IdemKey Unique ì œì•½ ì—†ìŒ
- âœ… `@UniqueConstraint(columnNames = {"idem_key"})` í•„ìˆ˜
- âŒ Orchestratorê°€ `boolean`/`void` ë°˜í™˜ ë˜ëŠ” Exception throw
- âœ… OrchestratorëŠ” `Outcome` (Ok/Retry/Fail) ë°˜í™˜

### 6. Javadoc í•„ìˆ˜
- âŒ `@author`, `@since` ì—†ëŠ” public í´ë˜ìŠ¤/ë©”ì„œë“œ
- âœ… **ëª¨ë“  public í´ë˜ìŠ¤/ë©”ì„œë“œì— Javadoc**

---

## ğŸ“‹ í•„ìˆ˜ ê·œì¹™

### Domain Layer
- âœ… Aggregate Root, Value Object, Domain Event, Factory Pattern

### Application Layer
- âœ… UseCase Single Responsibility, Command/Query ë¶„ë¦¬, `@Transactional` ê²½ê³„, Assembler

### Persistence Layer
- âœ… CQRS, QueryDSL, N+1 ë°©ì§€

### REST API Layer
- âœ… Controller Thin, GlobalExceptionHandler, ApiResponse í‘œì¤€í™”

---

## ğŸ”— ìƒì„¸ ê·œì¹™ ì°¸ì¡°

**Cursor AIëŠ” ì•„ë˜ ë””ë ‰í† ë¦¬ì˜ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:**

- `docs/coding_convention/02-domain-layer/`
- `docs/coding_convention/03-application-layer/`
- `docs/coding_convention/04-persistence-layer/`
- `docs/coding_convention/01-adapter-rest-api-layer/`
- `docs/coding_convention/05-testing/`
- `docs/coding_convention/06-java21-patterns/`
- `docs/coding_convention/07-enterprise-patterns/`
- `docs/coding_convention/09-orchestration-patterns/`

---

**âœ… ì´ ê·œì¹™ë“¤ì„ ì¤€ìˆ˜í•˜ë©´ Claude Code ê²€ì¦ì„ í†µê³¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**
