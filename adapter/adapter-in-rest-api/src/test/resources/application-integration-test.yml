spring:
  datasource:
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
    url: jdbc:tc:mysql:8.0.33:///${DB_NAME:fileflow_test}?TC_TMPFS=/testtmpfs:rw&TC_INITSCRIPT=file:src/test/resources/sql/insert-upload-test-data.sql

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQLDialect

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

# AWS Configuration (LocalStack)
aws:
  s3:
    bucket-name: test-fileflow-bucket
    region: us-east-1
    endpoint: http://localhost:4566  # LocalStack endpoint

  sqs:
    queue-url: http://localhost:4566/000000000000/test-file-upload-queue
    region: us-east-1
    endpoint: http://localhost:4566

# Logging
logging:
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.testcontainers: INFO
    com.ryuqq.fileflow: DEBUG

# Test Configuration
test:
  cleanup:
    enabled: true

  performance:
    concurrent-uploads: 10
    large-file-size-mb: 100
