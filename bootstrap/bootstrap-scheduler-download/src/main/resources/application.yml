# ========================================
# Download Scheduler Application Configuration
# ========================================
# 공통 설정 (환경별 설정은 application-{profile}.yml 참조)
#
# @author FileFlow Team
# @since 1.0.0
# ========================================

spring:
  application:
    name: fileflow-scheduler-download

  # Profile 설정 (기본값: local)
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}

  # NO Web Server (Scheduler만 실행)
  main:
    web-application-type: none

  # JPA Configuration (공통)
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true
    open-in-view: false

# ========================================
# External Download Outbox Scheduler Configuration (기본값)
# ========================================
fileflow:
  download:
    outbox:
      fixed-delay: 30000  # 30초
      initial-delay: 10000  # 10초
      batch-size: 10
      max-retry-count: 3
      retry-base-delay-seconds: 60
      retry-multiplier: 2.0
      retry-max-delay-seconds: 3600
      stale-minutes: 5

# ========================================
# Management & Actuator (공통)
# ========================================
management:
  server:
    port: 9091
  endpoints:
    web:
      base-path: /actuator
  metrics:
    export:
      prometheus:
        enabled: true
    tags:
      application: ${spring.application.name}

# ========================================
# Logging Configuration (공통)
# ========================================
# logback-spring.xml에서 상세 설정 관리
logging:
  level:
    root: INFO
    com.ryuqq.fileflow: DEBUG
