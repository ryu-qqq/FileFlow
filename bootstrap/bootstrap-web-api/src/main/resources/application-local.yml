# ===============================================
# Local Profile Configuration - Web API
# ===============================================
# 로컬 개발 환경 전용 설정
#
# @author FileFlow Team
# @since 1.0.0
# ===============================================

spring:
  # ===============================================
  # DataSource Configuration (Local)
  # ===============================================
  datasource:
    url: jdbc:mysql://localhost:3307/fileflow?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8&allowPublicKeyRetrieval=true
    username: fileflow_user
    password: fileflow_password
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20  # 로컬은 적은 커넥션
      minimum-idle: 5
      pool-name: WebAPI-Local-HikariPool

  # ===============================================
  # Redis Configuration (Local)
  # ===============================================
  data:
    redis:
      host: localhost
      port: 6379
      password: ""
      timeout: 3000ms

  # ===============================================
  # Flyway Configuration (Local)
  # ===============================================
  flyway:
    clean-disabled: false  # 로컬 환경에서는 clean 허용
    baseline-on-migrate: true

# ===============================================
# AWS S3 Configuration (Local)
# ===============================================
aws:
  s3:
    region: ap-northeast-2
    bucket-name: fileflow-local
    # 로컬 개발용 자격증명 (실제 환경에서는 IAM Role 사용)
    access-key: ${AWS_ACCESS_KEY_ID:}
    secret-key: ${AWS_SECRET_ACCESS_KEY:}

  # CloudWatch Logs (Local - 비활성화)
  cloudwatch:
    region: ap-northeast-2
    log-group: /local/fileflow-web-api
    log-stream: web-api-local

# ===============================================
# Server Configuration (Local)
# ===============================================
server:
  port: 8083
  tomcat:
    threads:
      max: 50  # 로컬에서는 스레드 수 제한

# ===============================================
# Logging Configuration (Local)
# ===============================================
logging:
  level:
    root: DEBUG
    com.ryuqq.fileflow: TRACE
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# ===============================================
# Management & Actuator (Local)
# ===============================================
management:
  endpoints:
    web:
      exposure:
        include: "*"  # 로컬에서는 모든 엔드포인트 노출
  endpoint:
    health:
      show-details: always